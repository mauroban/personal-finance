import{r as d,j as s,n as B,g as te,m as Xe,c as He}from"./index-DjoC8Tjb.js";import{s as ae,t as he}from"./PeriodSelector-Ccy8X63q.js";import{M as re}from"./MetricCard-ihLxaQMX.js";import{f as $}from"./format-zwvYc4J-.js";import{b as qe,aj as Ue,ak as Je,j as oe,al as Qe,x as Q,am as Ze,an as et,ao as ge,ap as tt,aq as at,s as rt,L as X,c as ce,ar as st,as as nt,at as it,O as ne,au as pe,Q as de,X as ue,V as Pe,W as we,Y as lt,a2 as ve,a3 as ot,av as Ee,Z as fe,_ as ct,r as Se,k as dt,l as ut,n as mt,o as xt,p as ht,G as gt,q as Ce,v as pt,aw as vt,t as ft,ax as yt,ay as bt,az as Oe,A as jt,aA as ye,z as be,aB as je,f as H,u as kt,J as Nt,i as G,h as At,I as It,K as Pt,M as De,aC as se,aD as wt,a8 as Z,aE as Et,a9 as St,aa as Ct,ab as Me,ac as Ot,ad as Le,ae as Te,af as $e,ag as Re,ah as ze,ai as Dt}from"./LineChart-CIGnwfOl.js";import{B as J,T as Mt}from"./formatting-AU7roy_L.js";function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ke(Object(a),!0).forEach(function(r){me(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function me(e,t,a){return(t=Lt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Lt(e){var t=Tt(e,"string");return typeof t=="symbol"?t:t+""}function Tt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ie.apply(null,arguments)}var $t=(e,t)=>{var a;return d.isValidElement(e)?a=d.cloneElement(e,t):typeof e=="function"?a=e(t):a=d.createElement("line",ie({},t,{className:"recharts-reference-line-line"})),a},Rt=(e,t,a,r,o,n,c,i,l)=>{var{x:m,y:g,width:h,height:f}=o;if(a){var{y:v}=l,N=e.y.apply(v,{position:n});if(ne(N)||l.ifOverflow==="discard"&&!e.y.isInRange(N))return null;var P=[{x:m+h,y:N},{x:m,y:N}];return i==="left"?P.reverse():P}if(t){var{x:w}=l,E=e.x.apply(w,{position:n});if(ne(E)||l.ifOverflow==="discard"&&!e.x.isInRange(E))return null;var O=[{x:E,y:g+f},{x:E,y:g}];return c==="top"?O.reverse():O}if(r){var{segment:C}=l,y=C.map(I=>e.apply(I,{position:n}));return l.ifOverflow==="discard"&&y.some(I=>!e.isInRange(I))?null:y}return null};function zt(e){var t=qe();return d.useEffect(()=>(t(Ue(e)),()=>{t(Je(e))})),null}function Vt(e){var{x:t,y:a,segment:r,xAxisId:o,yAxisId:n,shape:c,className:i,ifOverflow:l}=e,m=oe(),g=Qe(),h=Q(p=>Ze(p,o)),f=Q(p=>et(p,n)),v=Q(p=>ge(p,"xAxis",o,m)),N=Q(p=>ge(p,"yAxis",n,m)),P=tt(),w=pe(t),E=pe(a);if(!g||!P||h==null||f==null||v==null||N==null)return null;var O=at({x:v,y:N}),C=r&&r.length===2,y=Rt(O,w,E,C,P,e.position,h.orientation,f.orientation,e);if(!y)return null;var[{x:I,y:j},{x:L,y:W}]=y,u=l==="hidden"?"url(#".concat(g,")"):void 0,x=Ne(Ne({clipPath:u},rt(e)),{},{x1:I,y1:j,x2:L,y2:W});return d.createElement(X,{className:ce("recharts-reference-line",i)},$t(c,x),d.createElement(st,nt({x1:I,y1:j,x2:L,y2:W}),d.createElement(it,{label:e.label}),e.children))}function Ft(e){return d.createElement(d.Fragment,null,d.createElement(zt,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y}),d.createElement(Vt,e))}class xe extends d.Component{render(){return d.createElement(Ft,this.props)}}me(xe,"displayName","ReferenceLine");me(xe,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var Ve=(e,t,a,r)=>Pe(e,"xAxis",t,r),Fe=(e,t,a,r)=>we(e,"xAxis",t,r),We=(e,t,a,r)=>Pe(e,"yAxis",a,r),_e=(e,t,a,r)=>we(e,"yAxis",a,r),Wt=de([ue,Ve,We,Fe,_e],(e,t,a,r,o)=>Ee(e,"xAxis")?fe(t,r,!1):fe(a,o,!1)),_t=(e,t,a,r,o)=>o,Ke=de([ct,_t],(e,t)=>e.filter(a=>a.type==="area").find(a=>a.id===t)),Kt=(e,t,a,r,o)=>{var n,c=Ke(e,t,a,r,o);if(c!=null){var i=ue(e),l=Ee(i,"xAxis"),m;if(l?m=ve(e,"yAxis",a,r):m=ve(e,"xAxis",t,r),m!=null){var{stackId:g}=c,h=ot(c);if(!(g==null||h==null)){var f=(n=m[g])===null||n===void 0?void 0:n.stackedData;return f==null?void 0:f.find(v=>v.key===h)}}}},Bt=de([ue,Ve,We,Fe,_e,Kt,lt,Wt,Ke],(e,t,a,r,o,n,c,i,l)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:h}=c;if(!(l==null||e!=="horizontal"&&e!=="vertical"||t==null||a==null||r==null||o==null||r.length===0||o.length===0||i==null)){var{data:f}=l,v;if(f&&f.length>0?v=f:v=m==null?void 0:m.slice(g,h+1),v!=null){var N=void 0;return ua({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:o,dataStartIndex:g,areaSettings:l,stackedData:n,displayedData:v,chartBaseValue:N,bandSize:i})}}}),Gt=["id"],Yt=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Be(e,t){if(e==null)return{};var a,r,o=Xt(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function Xt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(a),!0).forEach(function(r){Ht(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ht(e,t,a){return(t=qt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qt(e){var t=Ut(e,"string");return typeof t=="symbol"?t:t+""}function Ut(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(null,arguments)}function ee(e,t){return e&&e!=="none"?e:t}var Jt=e=>{var{dataKey:t,name:a,stroke:r,fill:o,legendType:n,hide:c}=e;return[{inactive:c,dataKey:t,type:n,color:ee(r,o),value:Ce(a,t),payload:e}]};function Qt(e){var{dataKey:t,data:a,stroke:r,strokeWidth:o,fill:n,name:c,hide:i,unit:l}=e;return{dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:o,fill:n,dataKey:t,nameKey:void 0,name:Ce(c,t),hide:i,type:e.tooltipType,color:ee(r,n),unit:l}}}var Zt=(e,t)=>{var a;if(d.isValidElement(e))a=d.cloneElement(e,t);else if(typeof e=="function")a=e(t);else{var r=ce("recharts-area-dot",typeof e!="boolean"?e.className:"");a=d.createElement(Et,F({},t,{className:r}))}return a};function ea(e,t){return e==null?!1:t?!0:e.length===1}function ta(e){var{clipPathId:t,points:a,props:r}=e,{needClip:o,dot:n,dataKey:c}=r;if(!ea(a,n))return null;var i=Oe(n),l=De(r),m=wt(n),g=a.map((f,v)=>{var N=V(V(V({key:"dot-".concat(v),r:3},l),m),{},{index:v,cx:f.x,cy:f.y,dataKey:c,value:f.value,payload:f.payload,points:a});return Zt(n,N)}),h={clipPath:o?"url(#clipPath-".concat(i?"":"dots-").concat(t,")"):void 0};return d.createElement(X,F({className:"recharts-area-dots"},h),g)}function aa(e){var{showLabels:t,children:a,points:r}=e,o=r.map(n=>{var c={x:n.x,y:n.y,width:0,height:0};return V(V({},c),{},{value:n.value,payload:n.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return d.createElement(Pt,{value:t?o:null},a)}function Ie(e){var{points:t,baseLine:a,needClip:r,clipPathId:o,props:n}=e,{layout:c,type:i,stroke:l,connectNulls:m,isRange:g}=n,{id:h}=n,f=Be(n,Gt),v=De(f);return d.createElement(d.Fragment,null,(t==null?void 0:t.length)>1&&d.createElement(X,{clipPath:r?"url(#clipPath-".concat(o,")"):void 0},d.createElement(se,F({},v,{id:h,points:t,connectNulls:m,type:i,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),l!=="none"&&d.createElement(se,F({},v,{className:"recharts-area-curve",layout:c,type:i,connectNulls:m,fill:"none",points:t})),l!=="none"&&g&&d.createElement(se,F({},v,{className:"recharts-area-curve",layout:c,type:i,connectNulls:m,fill:"none",points:a}))),d.createElement(ta,{points:t,props:f,clipPathId:o}))}function ra(e){var{alpha:t,baseLine:a,points:r,strokeWidth:o}=e,n=r[0].y,c=r[r.length-1].y;if(!Z(n)||!Z(c))return null;var i=t*Math.abs(n-c),l=Math.max(...r.map(m=>m.x||0));return H(a)?l=Math.max(a,l):a&&Array.isArray(a)&&a.length&&(l=Math.max(...a.map(m=>m.x||0),l)),H(l)?d.createElement("rect",{x:0,y:n<c?n:n-i,width:l+(o?parseInt("".concat(o),10):1),height:Math.floor(i)}):null}function sa(e){var{alpha:t,baseLine:a,points:r,strokeWidth:o}=e,n=r[0].x,c=r[r.length-1].x;if(!Z(n)||!Z(c))return null;var i=t*Math.abs(n-c),l=Math.max(...r.map(m=>m.y||0));return H(a)?l=Math.max(a,l):a&&Array.isArray(a)&&a.length&&(l=Math.max(...a.map(m=>m.y||0),l)),H(l)?d.createElement("rect",{x:n<c?n:n-i,y:0,width:i,height:Math.floor(l+(o?parseInt("".concat(o),10):1))}):null}function na(e){var{alpha:t,layout:a,points:r,baseLine:o,strokeWidth:n}=e;return a==="vertical"?d.createElement(ra,{alpha:t,points:r,baseLine:o,strokeWidth:n}):d.createElement(sa,{alpha:t,points:r,baseLine:o,strokeWidth:n})}function ia(e){var{needClip:t,clipPathId:a,props:r,previousPointsRef:o,previousBaselineRef:n}=e,{points:c,baseLine:i,isAnimationActive:l,animationBegin:m,animationDuration:g,animationEasing:h,onAnimationStart:f,onAnimationEnd:v}=r,N=kt(r,"recharts-area-"),[P,w]=d.useState(!1),E=!P,O=d.useCallback(()=>{typeof v=="function"&&v(),w(!1)},[v]),C=d.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]),y=o.current,I=n.current;return d.createElement(aa,{showLabels:E,points:c},r.children,d.createElement(Nt,{animationId:N,begin:m,duration:g,isActive:l,easing:h,onAnimationEnd:O,onAnimationStart:C,key:N},j=>{if(y){var L=y.length/c.length,W=j===1?c:c.map((x,p)=>{var S=Math.floor(p*L);if(y[S]){var A=y[S];return V(V({},x),{},{x:G(A.x,x.x,j),y:G(A.y,x.y,j)})}return x}),u;return H(i)?u=G(I,i,j):At(i)||ne(i)?u=G(I,0,j):u=i.map((x,p)=>{var S=Math.floor(p*L);if(Array.isArray(I)&&I[S]){var A=I[S];return V(V({},x),{},{x:G(A.x,x.x,j),y:G(A.y,x.y,j)})}return x}),j>0&&(o.current=W,n.current=u),d.createElement(Ie,{points:W,baseLine:u,needClip:t,clipPathId:a,props:r})}return j>0&&(o.current=c,n.current=i),d.createElement(X,null,l&&d.createElement("defs",null,d.createElement("clipPath",{id:"animationClipPath-".concat(a)},d.createElement(na,{alpha:j,points:c,baseLine:i,layout:r.layout,strokeWidth:r.strokeWidth}))),d.createElement(X,{clipPath:"url(#animationClipPath-".concat(a,")")},d.createElement(Ie,{points:c,baseLine:i,needClip:t,clipPathId:a,props:r})))}),d.createElement(It,{label:r.label}))}function la(e){var{needClip:t,clipPathId:a,props:r}=e,o=d.useRef(null),n=d.useRef();return d.createElement(ia,{needClip:t,clipPathId:a,props:r,previousPointsRef:o,previousBaselineRef:n})}class oa extends d.PureComponent{render(){var{hide:t,dot:a,points:r,className:o,top:n,left:c,needClip:i,xAxisId:l,yAxisId:m,width:g,height:h,id:f,baseLine:v}=this.props;if(t)return null;var N=ce("recharts-area",o),P=f,{r:w,strokeWidth:E}=bt(a),O=Oe(a),C=w*2+E;return d.createElement(d.Fragment,null,d.createElement(X,{className:N},i&&d.createElement("defs",null,d.createElement(jt,{clipPathId:P,xAxisId:l,yAxisId:m}),!O&&d.createElement("clipPath",{id:"clipPath-dots-".concat(P)},d.createElement("rect",{x:c-C/2,y:n-C/2,width:g+C,height:h+C}))),d.createElement(la,{needClip:i,clipPathId:P,props:this.props})),d.createElement(ye,{points:r,mainColor:ee(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&d.createElement(ye,{points:v,mainColor:ee(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var Ge={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!gt.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function ca(e){var t,a=Se(e,Ge),{activeDot:r,animationBegin:o,animationDuration:n,animationEasing:c,connectNulls:i,dot:l,fill:m,fillOpacity:g,hide:h,isAnimationActive:f,legendType:v,stroke:N,xAxisId:P,yAxisId:w}=a,E=Be(a,Yt),O=pt(),C=vt(),{needClip:y}=ft(P,w),I=oe(),{points:j,isRange:L,baseLine:W}=(t=Q(k=>Bt(k,P,w,I,e.id)))!==null&&t!==void 0?t:{},u=yt();if(O!=="horizontal"&&O!=="vertical"||u==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:x,width:p,x:S,y:A}=u;return!j||!j.length?null:d.createElement(oa,F({},E,{activeDot:r,animationBegin:o,animationDuration:n,animationEasing:c,baseLine:W,connectNulls:i,dot:l,fill:m,fillOpacity:g,height:x,hide:h,layout:O,isAnimationActive:f,isRange:L,legendType:v,needClip:y,points:j,stroke:N,width:p,left:S,top:A,xAxisId:P,yAxisId:w}))}var da=(e,t,a,r,o)=>{var n=a??t;if(H(n))return n;var c=e==="horizontal"?o:r,i=c.scale.domain();if(c.type==="number"){var l=Math.max(i[0],i[1]),m=Math.min(i[0],i[1]);return n==="dataMin"?m:n==="dataMax"||l<0?l:Math.max(Math.min(i[0],i[1]),0)}return n==="dataMin"?i[0]:n==="dataMax"?i[1]:i[0]};function ua(e){var{areaSettings:{connectNulls:t,baseValue:a,dataKey:r},stackedData:o,layout:n,chartBaseValue:c,xAxis:i,yAxis:l,displayedData:m,dataStartIndex:g,xAxisTicks:h,yAxisTicks:f,bandSize:v}=e,N=o&&o.length,P=da(n,c,a,i,l),w=n==="horizontal",E=!1,O=m.map((y,I)=>{var j;N?j=o[g+I]:(j=be(y,r),Array.isArray(j)?E=!0:j=[P,j]);var L=j[1]==null||N&&!t&&be(y,r)==null;return w?{x:je({axis:i,ticks:h,bandSize:v,entry:y,index:I}),y:L?null:l.scale(j[1]),value:j,payload:y}:{x:L?null:i.scale(j[1]),y:je({axis:l,ticks:f,bandSize:v,entry:y,index:I}),value:j,payload:y}}),C;return N||E?C=O.map(y=>{var I=Array.isArray(y.value)?y.value[0]:null;return w?{x:y.x,y:I!=null&&y.y!=null?l.scale(I):null,payload:y.payload}:{x:I!=null?i.scale(I):null,y:y.y,payload:y.payload}}):C=w?l.scale(P):i.scale(P),{points:O,baseLine:C,isRange:E}}function ma(e){var t=Se(e,Ge),a=oe();return d.createElement(dt,{id:t.id,type:"area"},r=>d.createElement(d.Fragment,null,d.createElement(ut,{legendPayload:Jt(t)}),d.createElement(mt,{fn:Qt,args:t}),d.createElement(xt,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:ht(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:a,connectNulls:t.connectNulls}),d.createElement(ca,F({},t,{id:r}))))}var le=d.memo(ma);le.displayName="Area";var xa=["axis"],ha=d.forwardRef((e,t)=>d.createElement(St,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xa,tooltipPayloadSearcher:Ct,categoricalChartProps:e,ref:t}));const ga=({options:e,value:t,onChange:a,size:r="md",fullWidth:o=!1,className:n=""})=>{const c={sm:"h-8 text-xs px-2",md:"h-10 text-sm px-3",lg:"h-12 text-base px-4"};return s.jsx("div",{className:`relative inline-flex items-center gap-0.5 p-1 bg-neutral-100 rounded-lg ${o?"w-full":""} ${n}`,style:{boxShadow:ae.inner},children:e.map((i,l)=>{const m=i.value===t,g=l===0,h=l===e.length-1;return s.jsxs("button",{onClick:()=>a(i.value),className:`
              relative flex items-center justify-center gap-2
              font-medium transition-all
              ${c[r]}
              ${o?"flex-1":""}
              ${m?"text-neutral-900 bg-white shadow-sm":"text-neutral-500 hover:text-neutral-700"}
              ${g?"rounded-l-md":""}
              ${h?"rounded-r-md":""}
              ${!g&&!h?"rounded-md":""}
            `,style:{transition:`all ${he.fast}`,...m?{boxShadow:ae.sm}:{}},"aria-pressed":m,role:"radio",children:[i.icon&&s.jsx("span",{className:"flex-shrink-0",children:i.icon}),s.jsx("span",{className:"flex-shrink-0",children:i.label}),m&&s.jsx("div",{className:"absolute inset-0 bg-white rounded-md -z-10",style:{transition:`all ${he.base}`,boxShadow:ae.sm}})]},String(i.value))})})},Y=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"],pa=({categoryTrends:e,title:t="TendÃªncia de Gastos por Categoria"})=>{if(e.length===0)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t}),s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Sem dados de categorias para exibir"})]});const a=e[0].data.map(n=>`${n.monthName.substring(0,3)}/${n.year}`),r=e[0].data.map((n,c)=>{const i={month:a[c]};return e.forEach(l=>{i[l.categoryName]=l.data[c].value}),i}),o=({active:n,payload:c})=>n&&c&&c.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:c[0].payload.month}),c.sort((i,l)=>l.value-i.value).map((i,l)=>s.jsxs("p",{className:"text-sm",style:{color:i.color},children:[i.name,": ",$(i.value)]},l))]}):null;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"EvoluÃ§Ã£o dos gastos nas principais categorias"})]}),s.jsx(Me,{width:"100%",height:350,children:s.jsxs(Ot,{data:r,children:[s.jsx(Le,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Te,{dataKey:"month",stroke:"#6b7280",style:{fontSize:"12px"}}),s.jsx($e,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:n=>`R$ ${(n/1e3).toFixed(0)}k`}),s.jsx(Re,{content:s.jsx(o,{})}),s.jsx(ze,{}),e.map((n,c)=>s.jsx(Dt,{type:"monotone",dataKey:n.categoryName,stroke:Y[c%Y.length],strokeWidth:2,dot:{fill:Y[c%Y.length],r:4},activeDot:{r:6}},n.categoryId))]})}),s.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((n,c)=>{const i=n.trend==="up"?"ðŸ“ˆ":n.trend==="down"?"ðŸ“‰":"âž¡ï¸",l=n.trend==="up"?"text-red-600 dark:text-red-400":n.trend==="down"?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400";return s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Y[c%Y.length]}}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.categoryName})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{children:["MÃ©dia: ",$(n.average)]}),s.jsxs("div",{className:`flex items-center gap-1 ${l}`,children:[s.jsx("span",{children:i}),s.jsx("span",{children:n.trend==="stable"?"EstÃ¡vel":`${Math.abs(n.percentageChange).toFixed(0)}% ${n.trend==="up"?"aumento":"reduÃ§Ã£o"}`})]})]})]},n.categoryId)})})]})},va=({varianceTrend:e,title:t="VariaÃ§Ã£o: OrÃ§ado vs. Realizado"})=>{if(e.length===0)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t}),s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Sem dados de variaÃ§Ã£o para exibir"})]});const a=e.map(i=>({month:`${i.monthName.substring(0,3)}/${i.year}`,variance:i.variance,positiveVariance:i.variance>=0?i.variance:0,negativeVariance:i.variance<0?i.variance:0,budgeted:i.budgeted,actual:i.actual})),r=({active:i,payload:l})=>{if(i&&l&&l.length){const m=l[0].value,g=m>=0;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:l[0].payload.month}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["OrÃ§ado: ",$(l[0].payload.budgeted)]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Realizado: ",$(l[0].payload.actual)]}),s.jsxs("p",{className:`font-semibold ${g?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["VariaÃ§Ã£o: ",g?"+":"",$(m)]})]})]})}return null},o=e.reduce((i,l)=>i+l.variance,0),n=e.filter(i=>i.variance>=0).length,c=e.length;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ãrea positiva = economia alÃ©m do orÃ§ado | Ãrea negativa = gasto acima do orÃ§ado"})]}),s.jsx(Me,{width:"100%",height:300,children:s.jsxs(ha,{data:a,children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorPositive",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),s.jsxs("linearGradient",{id:"colorNegative",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.1})]})]}),s.jsx(Le,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Te,{dataKey:"month",stroke:"#6b7280",style:{fontSize:"12px"}}),s.jsx($e,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:i=>`R$ ${(i/1e3).toFixed(0)}k`}),s.jsx(Re,{content:s.jsx(r,{})}),s.jsx(ze,{}),s.jsx(xe,{y:0,stroke:"#6b7280",strokeDasharray:"3 3"}),s.jsx(le,{type:"monotone",dataKey:"positiveVariance",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorPositive)",name:"VariaÃ§Ã£o Positiva",fillOpacity:.6}),s.jsx(le,{type:"monotone",dataKey:"negativeVariance",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorNegative)",name:"VariaÃ§Ã£o Negativa",fillOpacity:.6})]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"VariaÃ§Ã£o Total"}),s.jsxs("div",{className:`text-xl font-bold ${o>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[o>=0?"+":"",$(o)]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Meses Positivos"}),s.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[n,"/",c]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[(n/c*100).toFixed(0),"% dos meses"]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"VariaÃ§Ã£o MÃ©dia"}),s.jsxs("div",{className:`text-xl font-bold ${o/c>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[o/c>=0?"+":"",$(o/c)]})]})]})]})},fa=({insights:e,title:t="Insights & PadrÃµes"})=>{if(e.length===0)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t}),s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Sem insights disponÃ­veis no momento"})]});const a=o=>{switch(o){case"achievement":return{container:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",icon:"text-green-600 dark:text-green-400",text:"text-green-900 dark:text-green-100"};case"observation":return{container:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",icon:"text-blue-600 dark:text-blue-400",text:"text-blue-900 dark:text-blue-100"};case"recommendation":return{container:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",icon:"text-amber-600 dark:text-amber-400",text:"text-amber-900 dark:text-amber-100"};default:return{container:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600",icon:"text-gray-600 dark:text-gray-400",text:"text-gray-900 dark:text-gray-100"}}},r=o=>{switch(o){case"achievement":return"Conquista";case"observation":return"ObservaÃ§Ã£o";case"recommendation":return"RecomendaÃ§Ã£o";default:return"Insight"}};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:t}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"AnÃ¡lises automÃ¡ticas baseadas nos seus dados financeiros"}),s.jsx("div",{className:"space-y-3",children:e.map((o,n)=>{const c=a(o.type);return s.jsx("div",{className:`p-4 rounded-lg border ${c.container} transition-all hover:shadow-md`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`text-2xl flex-shrink-0 ${c.icon}`,children:o.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${c.icon}`,children:r(o.type)})}),s.jsx("p",{className:`text-sm ${c.text}`,children:o.message})]})]})},n)})}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de insights:"}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.length})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Conquistas:"}),s.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:e.filter(o=>o.type==="achievement").length})]})]})]})},ya=(e,t,a,r,o,n=6)=>d.useMemo(()=>{const i=He(r,o)-n+1,l=[];for(let u=0;u<n;u++){const{year:x,month:p}=Xe(i+u);l.push({year:x,month:p})}const m=l.map(({year:u,month:x})=>{const p=e.filter(b=>B(b.date,u,x)),S=p.filter(b=>b.type==="earning").reduce((b,_)=>b+_.value,0),A=p.filter(b=>b.type==="expense").reduce((b,_)=>b+_.value,0),k=t.filter(b=>b.year===u&&b.month===x&&b.type==="income").reduce((b,_)=>b+_.amount,0),R=t.filter(b=>b.year===u&&b.month===x&&b.type==="expense").reduce((b,_)=>b+_.amount,0),D=k-R,z=S-A,q=z-D,M=D!==0?q/Math.abs(D)*100:0;return{month:x,year:u,monthName:te(x),variance:q,budgeted:D,actual:z,percentage:M}}),g=l.map(({year:u,month:x})=>{const p=e.filter(D=>B(D.date,u,x)),S=p.filter(D=>D.type==="earning").reduce((D,z)=>D+z.value,0),A=p.filter(D=>D.type==="expense").reduce((D,z)=>D+z.value,0),k=S-A,R=S>0?k/S*100:0;return{month:x,year:u,monthName:te(x),savings:k,savingsRate:R}}),f=a.filter(u=>!u.parentId).map(u=>{const x=a.filter(M=>M.parentId===u.id).map(M=>M.id),p=l.map(({year:M,month:b})=>{const Ye=e.filter(T=>{if(!B(T.date,M,b)||T.type!=="expense")return!1;const U=t.find(K=>K.type!=="expense"||K.year!==M||K.month!==b?!1:T.subgroupId?K.groupId===T.groupId&&K.subgroupId===T.subgroupId:K.groupId===T.groupId&&!K.subgroupId);return!(U!=null&&U.isFixedCost)}).filter(T=>T.groupId===u.id||T.subgroupId&&x.includes(T.subgroupId)).reduce((T,U)=>T+U.value,0);return{month:b,year:M,monthName:te(b),value:Ye}}),S=p.reduce((M,b)=>M+b.value,0),A=S/p.length,k=Math.floor(p.length/2),R=p.slice(0,k).reduce((M,b)=>M+b.value,0)/k,D=p.slice(k).reduce((M,b)=>M+b.value,0)/(p.length-k),z=R>0?(D-R)/R*100:0;let q="stable";return Math.abs(z)>Mt.significantChange&&(q=z>0?"up":"down"),{categoryId:u.id,categoryName:u.name,data:p,total:S,average:A,trend:q,percentageChange:z}}).filter(u=>u.total>0);let v=0,N=0;l.forEach(({year:u,month:x})=>{const S=e.filter(k=>B(k.date,u,x)).filter(k=>k.type==="expense").reduce((k,R)=>k+R.value,0),A=t.filter(k=>k.year===u&&k.month===x&&k.type==="expense").reduce((k,R)=>k+R.amount,0);if(A>0){const k=S/A*100;k<=100?v+=J.maxScore-k+J.baseScore:v+=Math.max(0,J.baseScore-(k-100)),N++}});const P=N>0?v/N:0,w=l.reduce((u,{year:x,month:p})=>{const S=e.filter(A=>B(A.date,x,p));return u+S.filter(A=>A.type==="earning").reduce((A,k)=>A+k.value,0)},0),E=l.reduce((u,{year:x,month:p})=>{const S=e.filter(A=>B(A.date,x,p));return u+S.filter(A=>A.type==="expense").reduce((A,k)=>A+k.value,0)},0),O=g.reduce((u,x)=>u+x.savings,0),C=l.length>0?O/l.length:0,y=[],I=g.reduce((u,x)=>x.savings>u.savings?x:u);I.savings>0&&y.push({type:"achievement",message:`Melhor mÃªs: ${I.monthName} com R$ ${I.savings.toFixed(2)} economizados`,icon:"ðŸ†"});const j=f.filter(u=>u.trend==="up"&&u.percentageChange>15);if(j.length>0){const u=j.reduce((x,p)=>p.percentageChange>x.percentageChange?p:x);y.push({type:"observation",message:`Gastos com "${u.categoryName}" aumentaram ${u.percentageChange.toFixed(0)}% no perÃ­odo`,icon:"ðŸ“ˆ"})}const L=f.filter(u=>u.trend==="down");if(L.length>0){const u=L.reduce((x,p)=>Math.abs(p.percentageChange)>Math.abs(x.percentageChange)?p:x);y.push({type:"achievement",message:`Ã“timo! VocÃª reduziu gastos com "${u.categoryName}" em ${Math.abs(u.percentageChange).toFixed(0)}%`,icon:"âœ…"})}return P>=J.goodThreshold?y.push({type:"achievement",message:`Excelente! VocÃª manteve ${P.toFixed(0)}% de aderÃªncia ao orÃ§amento`,icon:"ðŸŽ¯"}):P<J.poorThreshold&&y.push({type:"recommendation",message:"Revise seus orÃ§amentos para melhorar o controle financeiro",icon:"ðŸ’¡"}),g.length>=2&&g[g.length-1].savings>g[0].savings&&y.push({type:"achievement",message:"Suas economias estÃ£o aumentando mÃªs a mÃªs!",icon:"ðŸ“Š"}),{categoryTrends:f,varianceTrend:m,savingsTrend:g,budgetAdherence:P,insights:y,periodSummary:{totalIncome:w,totalExpense:E,totalSavings:O,averageMonthlySavings:C,monthsAnalyzed:l.length}}},[e,t,a,r,o,n]),Pa=({transactions:e,budgets:t,categories:a})=>{const[r,o]=d.useState("6"),n=new Date,c=n.getFullYear(),i=n.getMonth()+1,l=w=>{const E=window.scrollY;o(w),requestAnimationFrame(()=>{window.scrollTo(0,E)})},m=[{value:"3",label:"3 Meses"},{value:"6",label:"6 Meses"},{value:"12",label:"12 Meses"}],g=parseInt(r),h=ya(e,t,a,c,i,g),f=[...h.categoryTrends].sort((w,E)=>E.total-w.total).slice(0,5),v=h.savingsTrend.slice(-2),N=v.length===2?(v[1].savings-v[0].savings)/Math.abs(v[0].savings||1)*100:0,P=h.budgetAdherence>=70?"positive":h.budgetAdherence>=50?"neutral":"negative";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center sm:justify-end",children:s.jsx(ga,{options:m,value:r,onChange:l,size:"md"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(re,{label:"Economia MÃ©dia Mensal",value:$(h.periodSummary.averageMonthlySavings),sublabel:`${N>=0?"+":""}${N.toFixed(1)}% vs mÃªs anterior`,status:N>=0?"positive":"negative",icon:"ðŸ’°",size:"medium"}),s.jsx(re,{label:"AderÃªncia ao OrÃ§amento",value:`${h.budgetAdherence.toFixed(0)}%`,sublabel:h.budgetAdherence>=70?"Excelente controle":h.budgetAdherence>=50?"Bom controle":"Precisa melhorar",status:P,icon:"ðŸŽ¯",size:"medium"}),s.jsx(re,{label:"Total Economizado",value:$(h.periodSummary.totalSavings),sublabel:`Nos Ãºltimos ${g} meses`,status:h.periodSummary.totalSavings>=0?"positive":"negative",icon:"ðŸ“Š",size:"medium"})]})]}),f.length>0&&s.jsx(pa,{categoryTrends:f}),s.jsx(va,{varianceTrend:h.varianceTrend}),s.jsx(fa,{insights:h.insights}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resumo do PerÃ­odo"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Meses Analisados"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.periodSummary.monthsAnalyzed})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Receitas"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:$(h.periodSummary.totalIncome)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Despesas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:$(h.periodSummary.totalExpense)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Saldo Acumulado"}),s.jsx("p",{className:`text-2xl font-bold ${h.periodSummary.totalSavings>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:$(h.periodSummary.totalSavings)})]})]})]})]})};export{Pa as TrendsTab};
