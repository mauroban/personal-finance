import{r as x,n as ce,g as le,j as s,o as tt}from"./index-DjoC8Tjb.js";import{f as v}from"./format-zwvYc4J-.js";import{r as De,u as Te,c as Me,s as xe,g as rt,J as _e,i as B,L as F,S as at,a as st,R as nt,b as oe,d as it,m as lt,e as ot,f as ue,h as re,j as Ke,k as dt,l as ct,n as xt,o as ut,p as mt,G as pt,q as Le,t as gt,v as ht,w as vt,x as Z,y as ft,z as Ve,A as yt,B as bt,C as jt,D as me,E as ze,F as kt,H as Fe,I as Nt,K as Pt,M as wt,N as Ot,O as It,P as pe,Q as $,T as Et,U as At,V as T,W as M,X as _,Y as Bt,Z as We,_ as Ge,$ as Ye,a0 as St,a1 as Ct,a2 as ge,a3 as $t,a4 as Rt,a5 as he,a6 as Dt,a7 as ne,a8 as ve,a9 as Tt,aa as Mt,ab as fe,ac as _t,ad as ye,ae as be,af as je,ag as ke,ah as Ne,ai as H}from"./LineChart-CIGnwfOl.js";import{u as Kt}from"./useMediaQuery-BhwLU3FH.js";const W=(e,t,r,a)=>{const i=x.useMemo(()=>{const o=[];let l=0,d=0,c=0,u=0;const g=new Date,p=g.getFullYear(),j=g.getMonth()+1;for(let h=1;h<=12;h++){const f=a>p||a===p&&h>j,y=e.filter(k=>ce(k.date,a,h)),b=t.filter(k=>k.year===a&&k.month===h),m=f?0:y.filter(k=>k.type==="earning").reduce((k,w)=>k+w.value,0),P=f?0:y.filter(k=>k.type==="expense").reduce((k,w)=>k+w.value,0),N=b.filter(k=>k.type==="income").reduce((k,w)=>k+w.amount,0),O=b.filter(k=>k.type==="expense").reduce((k,w)=>k+w.amount,0);f||(l+=m,d+=P),c+=N,u+=O,o.push({month:h,monthName:le(h),income:m,expense:P,budgetedIncome:N,budgetedExpense:O,netBalance:m-P,incomeVariance:f?0:m-N,expenseVariance:f?0:O-P,isFuture:f})}return{totalIncome:l,totalExpense:d,totalBudgetedIncome:c,totalBudgetedExpense:u,netBalance:l-d,totalIncomeVariance:l-c,totalExpenseVariance:u-d,monthlyBreakdowns:o}},[e,t,a]),n=x.useMemo(()=>r.filter(l=>!l.parentId).map(l=>{const d=r.filter(h=>h.parentId===l.id).map(h=>h.id);let c=0,u=0;const g=[];for(let h=1;h<=12;h++){const f=e.filter(m=>ce(m.date,a,h)&&m.type==="expense"),y=t.filter(m=>m.year===a&&m.month===h&&m.type==="expense"&&(m.groupId===l.id||m.subgroupId&&d.includes(m.subgroupId))).reduce((m,P)=>m+P.amount,0),b=f.filter(m=>m.groupId===l.id||m.subgroupId&&d.includes(m.subgroupId)).reduce((m,P)=>m+P.value,0);c+=y,u+=b,g.push({month:h,budgeted:y,actual:b})}const p=c-u,j=c>0?u/c*100:0;return{groupId:l.id,groupName:l.name,totalBudgeted:c,totalActual:u,totalRemaining:p,averagePercentage:j,monthlyData:g}}).filter(l=>l.totalBudgeted>0||l.totalActual>0),[e,t,r,a]);return{yearlySummary:i,yearlyGroupSummaries:n}},Lt=({transactions:e,budgets:t,categories:r,year:a})=>{const{yearlySummary:i}=W(e,t,r,a),n=i.totalBudgetedIncome>0?i.totalIncome/i.totalBudgetedIncome*100:0,o=i.totalBudgetedExpense>0?i.totalExpense/i.totalBudgetedExpense*100:0,l=i.totalIncome>0?(i.totalIncome-i.totalExpense)/i.totalIncome*100:0;return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:["Resumo Anual ",a]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[s.jsx("h3",{className:"text-sm font-medium text-green-800 dark:text-green-300 mb-2",children:"Receitas"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Realizado"}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:v(i.totalIncome)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Planejado"}),s.jsx("p",{className:"text-lg text-green-800 dark:text-green-200",children:v(i.totalBudgetedIncome)})]}),s.jsxs("div",{className:"pt-2 border-t border-green-200 dark:border-green-700",children:[s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"VariaÃ§Ã£o"}),s.jsxs("p",{className:`text-lg font-semibold ${i.totalIncomeVariance>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-400"}`,children:[i.totalIncomeVariance>=0?"+":"",v(i.totalIncomeVariance)]}),s.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[n.toFixed(1),"% do planejado"]})]})]})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-2",children:"Despesas"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Realizado"}),s.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:v(i.totalExpense)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Planejado"}),s.jsx("p",{className:"text-lg text-red-800 dark:text-red-200",children:v(i.totalBudgetedExpense)})]}),s.jsxs("div",{className:"pt-2 border-t border-red-200 dark:border-red-700",children:[s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"VariaÃ§Ã£o"}),s.jsxs("p",{className:`text-lg font-semibold ${i.totalExpenseVariance>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-400"}`,children:[i.totalExpenseVariance>=0?"+":"",v(i.totalExpenseVariance)]}),s.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[o.toFixed(1),"% do planejado"]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Saldo Anual"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Saldo LÃ­quido"}),s.jsx("p",{className:`text-2xl font-bold ${i.netBalance>=0?"text-blue-900 dark:text-blue-100":"text-red-700 dark:text-red-400"}`,children:v(i.netBalance)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Taxa de PoupanÃ§a"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[l.toFixed(1),"%"]})]}),s.jsxs("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-700",children:[s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"MÃ©dia Mensal"}),s.jsx("p",{className:"text-lg text-blue-800 dark:text-blue-200",children:v(i.netBalance/12)})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"AnÃ¡lise Anual"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Receita MÃ©dia Mensal:"})," ",v(i.totalIncome/12)]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Despesa MÃ©dia Mensal:"})," ",v(i.totalExpense/12)]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Melhor MÃªs:"})," ",i.monthlyBreakdowns.reduce((d,c)=>c.netBalance>d.netBalance?c:d).monthName]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Pior MÃªs:"})," ",i.monthlyBreakdowns.reduce((d,c)=>c.netBalance<d.netBalance?c:d).monthName]})})]})]})]})})};var qe=e=>null;qe.displayName="Cell";var ae={},Pe;function Vt(){return Pe||(Pe=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const n=r[Symbol.toStringTag];return n==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${n}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t})(ae)),ae}var se,we;function zt(){return we||(we=1,se=Vt().isPlainObject),se}var Ft=zt();const Wt=tt(Ft);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(a){Gt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gt(e,t,r){return(t=Yt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e){var t=qt(e,"string");return typeof t=="symbol"?t:t+""}function qt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q.apply(null,arguments)}var Ee=(e,t,r,a,i)=>{var n=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-n/2,",").concat(t+i),o+="L ".concat(e+r-n/2-a,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},Ut={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xt=e=>{var t=De(e,Ut),{x:r,y:a,upperWidth:i,lowerWidth:n,height:o,className:l}=t,{animationEasing:d,animationDuration:c,animationBegin:u,isUpdateAnimationActive:g}=t,p=x.useRef(null),[j,h]=x.useState(-1),f=x.useRef(i),y=x.useRef(n),b=x.useRef(o),m=x.useRef(r),P=x.useRef(a),N=Te(e,"trapezoid-");if(x.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var A=p.current.getTotalLength();A&&h(A)}catch{}},[]),r!==+r||a!==+a||i!==+i||n!==+n||o!==+o||i===0&&n===0||o===0)return null;var O=Me("recharts-trapezoid",l);if(!g)return x.createElement("g",null,x.createElement("path",Q({},xe(t),{className:O,d:Ee(r,a,i,n,o)})));var k=f.current,w=y.current,E=b.current,K=m.current,S=P.current,L="0px ".concat(j===-1?1:j,"px"),Y="".concat(j,"px 0px"),R=rt(["strokeDasharray"],c,d);return x.createElement(_e,{animationId:N,key:N,canBegin:j>0,duration:c,easing:d,isActive:g,begin:u},A=>{var D=B(k,i,A),V=B(w,n,A),q=B(E,o,A),U=B(K,r,A),X=B(S,a,A);p.current&&(f.current=D,y.current=V,b.current=q,m.current=U,P.current=X);var et=A>0?{transition:R,strokeDasharray:Y}:{strokeDasharray:L};return x.createElement("path",Q({},xe(t),{className:O,d:Ee(U,X,D,V,q),ref:p,style:Ie(Ie({},et),t.style)}))})},Ht=["option","shapeType","propTransformer","activeClassName","isActive"];function Jt(e,t){if(e==null)return{};var r,a,i=Zt(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zt(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(r),!0).forEach(function(a){Qt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qt(e,t,r){return(t=er(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e){var t=tr(e,"string");return typeof t=="symbol"?t:t+""}function tr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t){return ee(ee({},t),e)}function ar(e,t){return e==="symbols"}function Be(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(nt,r);case"trapezoid":return x.createElement(Xt,r);case"sector":return x.createElement(st,r);case"symbols":if(ar(t))return x.createElement(at,r);break;default:return null}}function sr(e){return x.isValidElement(e)?e.props:e}function nr(e){var{option:t,shapeType:r,propTransformer:a=rr,activeClassName:i="recharts-active-shape",isActive:n}=e,o=Jt(e,Ht),l;if(x.isValidElement(t))l=x.cloneElement(t,ee(ee({},o),sr(t)));else if(typeof t=="function")l=t(o);else if(Wt(t)&&typeof t!="boolean"){var d=a(t,o);l=x.createElement(Be,{shapeType:r,elementProps:d})}else{var c=o;l=x.createElement(Be,{shapeType:r,elementProps:c})}return n?x.createElement(F,{className:i},l):l}var Ue=(e,t)=>{var r=oe();return(a,i)=>n=>{e==null||e(a,i,n),r(it({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},Xe=e=>{var t=oe();return(r,a)=>i=>{e==null||e(r,a,i),t(lt())}},He=(e,t)=>{var r=oe();return(a,i)=>n=>{e==null||e(a,i,n),r(ot({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},ir="Invariant failed";function lr(e,t){throw new Error(ir)}var or=["x","y"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ie.apply(null,arguments)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Se(Object(r),!0).forEach(function(a){dr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dr(e,t,r){return(t=cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cr(e){var t=xr(e,"string");return typeof t=="symbol"?t:t+""}function xr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ur(e,t){if(e==null)return{};var r,a,i=mr(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function pr(e,t){var{x:r,y:a}=e,i=ur(e,or),n="".concat(r),o=parseInt(n,10),l="".concat(a),d=parseInt(l,10),c="".concat(t.height||i.height),u=parseInt(c,10),g="".concat(t.width||i.width),p=parseInt(g,10);return z(z(z(z(z({},t),i),o?{x:o}:{}),d?{y:d}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function de(e){return x.createElement(nr,ie({shapeType:"rectangle",propTransformer:pr,activeClassName:"recharts-active-bar"},e))}var gr=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,i)=>{if(ue(t))return t;var n=ue(a)||re(a);return n?t(a,i):(n||lr(),r)}},hr=["onMouseEnter","onMouseLeave","onClick"],vr=["value","background","tooltipPosition"],fr=["id"],yr=["onMouseEnter","onClick","onMouseLeave"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},C.apply(null,arguments)}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ce(Object(r),!0).forEach(function(a){br(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function br(e,t,r){return(t=jr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e){var t=kr(e,"string");return typeof t=="symbol"?t:t+""}function kr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function te(e,t){if(e==null)return{};var r,a,i=Nr(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Pr=e=>{var{dataKey:t,name:r,fill:a,legendType:i,hide:n}=e;return[{inactive:n,dataKey:t,type:i,color:a,value:Le(r,t),payload:e}]};function wr(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:i,name:n,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Le(n,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function Or(e){var t=Z(ze),{data:r,dataKey:a,background:i,allOtherBarProps:n}=e,{onMouseEnter:o,onMouseLeave:l,onClick:d}=n,c=te(n,hr),u=Ue(o,a),g=Xe(l),p=He(d,a);if(!i||r==null)return null;var j=kt(i);return x.createElement(x.Fragment,null,r.map((h,f)=>{var{value:y,background:b,tooltipPosition:m}=h,P=te(h,vr);if(!b)return null;var N=u(h,f),O=g(h,f),k=p(h,f),w=I(I(I(I(I({option:i,isActive:String(f)===t},P),{},{fill:"#eee"},b),j),Fe(c,h,f)),{},{onMouseEnter:N,onMouseLeave:O,onClick:k,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return x.createElement(de,C({key:"background-bar-".concat(f)},w))}))}function Ir(e){var{showLabels:t,children:r,rects:a}=e,i=a==null?void 0:a.map(n=>{var o={x:n.x,y:n.y,width:n.width,height:n.height};return I(I({},o),{},{value:n.value,payload:n.payload,parentViewBox:n.parentViewBox,viewBox:o,fill:n.fill})});return x.createElement(Pt,{value:t?i:void 0},r)}function Er(e){var{shape:t,activeBar:r,baseProps:a,entry:i,index:n,dataKey:o}=e,l=Z(ze),d=Z(Ot),c=r&&String(n)===l&&(d==null||o===d),u=c?r:t;return x.createElement(de,C({},a,{name:String(a.name)},i,{isActive:c,option:u,index:n,dataKey:o}))}function Ar(e){var{shape:t,baseProps:r,entry:a,index:i,dataKey:n}=e;return x.createElement(de,C({},r,{name:String(r.name)},a,{isActive:!1,option:t,index:i,dataKey:n}))}function Br(e){var{data:t,props:r}=e,a=wt(r),{id:i}=a,n=te(a,fr),{shape:o,dataKey:l,activeBar:d}=r,{onMouseEnter:c,onClick:u,onMouseLeave:g}=r,p=te(r,yr),j=Ue(c,l),h=Xe(g),f=He(u,l);return t?x.createElement(x.Fragment,null,t.map((y,b)=>x.createElement(F,C({key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(b),className:"recharts-bar-rectangle"},Fe(p,y,b),{onMouseEnter:j(y,b),onMouseLeave:h(y,b),onClick:f(y,b)}),d?x.createElement(Er,{shape:o,activeBar:d,baseProps:n,entry:y,index:b,dataKey:l}):x.createElement(Ar,{shape:o,baseProps:n,entry:y,index:b,dataKey:l})))):null}function Sr(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:i,isAnimationActive:n,animationBegin:o,animationDuration:l,animationEasing:d,onAnimationEnd:c,onAnimationStart:u}=t,g=r.current,p=Te(t,"recharts-bar-"),[j,h]=x.useState(!1),f=!j,y=x.useCallback(()=>{typeof c=="function"&&c(),h(!1)},[c]),b=x.useCallback(()=>{typeof u=="function"&&u(),h(!0)},[u]);return x.createElement(Ir,{showLabels:f,rects:a},x.createElement(_e,{animationId:p,begin:o,duration:l,isActive:n,easing:d,onAnimationEnd:y,onAnimationStart:b,key:p},m=>{var P=m===1?a:a==null?void 0:a.map((N,O)=>{var k=g&&g[O];if(k)return I(I({},N),{},{x:B(k.x,N.x,m),y:B(k.y,N.y,m),width:B(k.width,N.width,m),height:B(k.height,N.height,m)});if(i==="horizontal"){var w=B(0,N.height,m);return I(I({},N),{},{y:N.y+N.height-w,height:w})}var E=B(0,N.width,m);return I(I({},N),{},{width:E})});return m>0&&(r.current=P??null),P==null?null:x.createElement(F,null,x.createElement(Br,{props:t,data:P}))}),x.createElement(Nt,{label:t.label}),t.children)}function Cr(e){var t=x.useRef(null);return x.createElement(Sr,{previousRectanglesRef:t,props:e})}var Je=0,$r=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ve(e,t)}};class Rr extends x.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:i,xAxisId:n,yAxisId:o,needClip:l,background:d,id:c}=this.props;if(t||r==null)return null;var u=Me("recharts-bar",i),g=c;return x.createElement(F,{className:u,id:c},l&&x.createElement("defs",null,x.createElement(yt,{clipPathId:g,xAxisId:n,yAxisId:o})),x.createElement(F,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):void 0},x.createElement(Or,{data:r,dataKey:a,background:d,allOtherBarProps:this.props}),x.createElement(Cr,this.props)))}}var Dr={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!pt.isSsr,legendType:"rect",minPointSize:Je,xAxisId:0,yAxisId:0};function Tr(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:i,minPointSize:n,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:c,isAnimationActive:u}=e,{needClip:g}=gt(t,r),p=ht(),j=Ke(),h=vt(e.children,qe),f=Z(m=>ca(m,t,r,j,e.id,h));if(p!=="vertical"&&p!=="horizontal")return null;var y,b=f==null?void 0:f[0];return b==null||b.height==null||b.width==null?y=0:y=p==="vertical"?b.height/2:b.width/2,x.createElement(ft,{xAxisId:t,yAxisId:r,data:f,dataPointFormatter:$r,errorBarOffset:y},x.createElement(Rr,C({},e,{layout:p,needClip:g,data:f,xAxisId:t,yAxisId:r,hide:a,legendType:i,minPointSize:n,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:c,isAnimationActive:u})))}function Mr(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:i,bandSize:n,xAxis:o,yAxis:l,xAxisTicks:d,yAxisTicks:c,stackedData:u,displayedData:g,offset:p,cells:j,parentViewBox:h}=e,f=t==="horizontal"?l:o,y=u?f.scale.domain():null,b=bt({numericAxis:f});return g.map((m,P)=>{var N,O,k,w,E,K;u?N=jt(u[P],y):(N=Ve(m,r),Array.isArray(N)||(N=[b,N]));var S=gr(a,Je)(N[1],P);if(t==="horizontal"){var L,[Y,R]=[l.scale(N[0]),l.scale(N[1])];O=me({axis:o,ticks:d,bandSize:n,offset:i.offset,entry:m,index:P}),k=(L=R??Y)!==null&&L!==void 0?L:void 0,w=i.size;var A=Y-R;if(E=It(A)?0:A,K={x:O,y:p.top,width:w,height:p.height},Math.abs(S)>0&&Math.abs(E)<Math.abs(S)){var D=pe(E||S)*(Math.abs(S)-Math.abs(E));k-=D,E+=D}}else{var[V,q]=[o.scale(N[0]),o.scale(N[1])];if(O=V,k=me({axis:l,ticks:c,bandSize:n,offset:i.offset,entry:m,index:P}),w=q-V,E=i.size,K={x:p.left,y:k,width:p.width,height:E},Math.abs(S)>0&&Math.abs(w)<Math.abs(S)){var U=pe(w||S)*(Math.abs(S)-Math.abs(w));w+=U}}if(O==null||k==null||w==null||E==null)return null;var X=I(I({},m),{},{x:O,y:k,width:w,height:E,value:u?N:N[1],payload:m,background:K,tooltipPosition:{x:O+w/2,y:k+E/2},parentViewBox:h},j&&j[P]&&j[P].props);return X}).filter(Boolean)}function _r(e){var t=De(e,Dr),r=Ke();return x.createElement(dt,{id:t.id,type:"bar"},a=>x.createElement(x.Fragment,null,x.createElement(ct,{legendPayload:Pr(t)}),x.createElement(xt,{fn:wr,args:t}),x.createElement(ut,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:mt(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),x.createElement(Tr,C({},t,{id:a}))))}var Ze=x.memo(_r);Ze.displayName="Bar";function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(r),!0).forEach(function(a){Kr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kr(e,t,r){return(t=Lr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lr(e){var t=Vr(e,"string");return typeof t=="symbol"?t:t+""}function Vr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zr=(e,t)=>t,Fr=(e,t,r)=>r,Wr=(e,t,r,a)=>a,Gr=(e,t,r,a,i)=>i,G=$([Ge,Gr],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Yr=$([G],e=>e==null?void 0:e.maxBarSize),qr=(e,t,r,a,i,n)=>n,Re=(e,t,r)=>{var a=r??e;if(!re(a))return ne(a,t,0)},Ur=$([_,Ge,zr,Fr,Wr],(e,t,r,a,i)=>t.filter(n=>e==="horizontal"?n.xAxisId===r:n.yAxisId===a).filter(n=>n.isPanorama===i).filter(n=>n.hide===!1).filter(n=>n.type==="bar")),Xr=(e,t,r,a)=>{var i=_(e);return i==="horizontal"?ge(e,"yAxis",r,a):ge(e,"xAxis",t,a)},Hr=(e,t,r)=>{var a=_(e);return a==="horizontal"?he(e,"xAxis",t):he(e,"yAxis",r)},Jr=(e,t,r)=>{var a={},i=e.filter(Dt),n=e.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),a),l=Object.entries(o).map(c=>{var[u,g]=c,p=g.map(h=>h.dataKey),j=Re(t,r,g[0].barSize);return{stackId:u,dataKeys:p,barSize:j}}),d=n.map(c=>{var u=[c.dataKey].filter(p=>p!=null),g=Re(t,r,c.barSize);return{stackId:void 0,dataKeys:u,barSize:g}});return[...l,...d]},Zr=$([Ur,Rt,Hr],Jr),Qr=(e,t,r,a,i)=>{var n,o,l=G(e,t,r,a,i);if(l!=null){var d=_(e),c=Ye(e),{maxBarSize:u}=l,g=re(u)?c:u,p,j;return d==="horizontal"?(p=T(e,"xAxis",t,a),j=M(e,"xAxis",t,a)):(p=T(e,"yAxis",r,a),j=M(e,"yAxis",r,a)),(n=(o=We(p,j,!0))!==null&&o!==void 0?o:g)!==null&&n!==void 0?n:0}},Qe=(e,t,r,a)=>{var i=_(e),n,o;return i==="horizontal"?(n=T(e,"xAxis",t,a),o=M(e,"xAxis",t,a)):(n=T(e,"yAxis",r,a),o=M(e,"yAxis",r,a)),We(n,o)};function ea(e,t,r,a,i){var n=a.length;if(!(n<1)){var o=ne(e,r,0,!0),l,d=[];if(ve(a[0].barSize)){var c=!1,u=r/n,g=a.reduce((b,m)=>b+(m.barSize||0),0);g+=(n-1)*o,g>=r&&(g-=(n-1)*o,o=0),g>=r&&u>0&&(c=!0,u*=.9,g=n*u);var p=(r-g)/2>>0,j={offset:p-o,size:0};l=a.reduce((b,m)=>{var P,N={stackId:m.stackId,dataKeys:m.dataKeys,position:{offset:j.offset+j.size+o,size:c?u:(P=m.barSize)!==null&&P!==void 0?P:0}},O=[...b,N];return j=O[O.length-1].position,O},d)}else{var h=ne(t,r,0,!0);r-2*h-(n-1)*o<=0&&(o=0);var f=(r-2*h-(n-1)*o)/n;f>1&&(f>>=0);var y=ve(i)?Math.min(f,i):f;l=a.reduce((b,m,P)=>[...b,{stackId:m.stackId,dataKeys:m.dataKeys,position:{offset:h+(f+o)*P+(f-y)/2,size:y}}],d)}return l}}var ta=(e,t,r,a,i,n,o)=>{var l=re(o)?t:o,d=ea(r,a,i!==n?i:n,e,l);return i!==n&&d!=null&&(d=d.map(c=>J(J({},c),{},{position:J(J({},c.position),{},{offset:c.position.offset-i/2})}))),d},ra=$([Zr,Ye,St,Ct,Qr,Qe,Yr],ta),aa=(e,t,r,a)=>T(e,"xAxis",t,a),sa=(e,t,r,a)=>T(e,"yAxis",r,a),na=(e,t,r,a)=>M(e,"xAxis",t,a),ia=(e,t,r,a)=>M(e,"yAxis",r,a),la=$([ra,G],(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),oa=(e,t)=>{var r=$t(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var i=e[a];if(i){var{stackedData:n}=i;if(n)return n.find(o=>o.key===r)}}}},da=$([Xr,G],oa),ca=$([Et,At,aa,sa,na,ia,la,_,Bt,Qe,da,G,qr],(e,t,r,a,i,n,o,l,d,c,u,g,p)=>{var{chartData:j,dataStartIndex:h,dataEndIndex:f}=d;if(!(g==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||a==null||i==null||n==null||c==null)){var{data:y}=g,b;if(y!=null&&y.length>0?b=y:b=j==null?void 0:j.slice(h,f+1),b!=null)return Mr({layout:l,barSettings:g,pos:o,parentViewBox:t,bandSize:c,xAxis:r,yAxis:a,xAxisTicks:i,yAxisTicks:n,stackedData:u,displayedData:b,offset:e,cells:p})}}),xa=["axis","item"],ua=x.forwardRef((e,t)=>x.createElement(Tt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xa,tooltipPayloadSearcher:Mt,categoricalChartProps:e,ref:t}));const ma=({transactions:e,budgets:t,categories:r,year:a})=>{const{yearlySummary:i}=W(e,t,r,a),n=i.monthlyBreakdowns.filter(l=>!l.isFuture).map(l=>({month:l.monthName.substring(0,3),"Receita Planejada":l.budgetedIncome,"Receita Real":l.income,"Despesa Planejada":l.budgetedExpense,"Despesa Real":l.expense,Saldo:l.netBalance})),o=({active:l,payload:d})=>l&&d&&d.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:d[0].payload.month}),d.map((c,u)=>s.jsxs("p",{className:"text-sm",style:{color:c.color},children:[c.name,": ",v(c.value)]},u))]}):null;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:["TendÃªncia Mensal ",a]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Receitas e Despesas"}),s.jsx(fe,{width:"100%",height:300,children:s.jsxs(_t,{data:n,children:[s.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(be,{dataKey:"month",stroke:"#6b7280",style:{fontSize:"12px"}}),s.jsx(je,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:l=>`R$ ${(l/1e3).toFixed(0)}k`}),s.jsx(ke,{content:s.jsx(o,{})}),s.jsx(Ne,{}),s.jsx(H,{type:"monotone",dataKey:"Receita Planejada",stroke:"#86efac",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#86efac",r:4}}),s.jsx(H,{type:"monotone",dataKey:"Receita Real",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",r:5}}),s.jsx(H,{type:"monotone",dataKey:"Despesa Planejada",stroke:"#fca5a5",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#fca5a5",r:4}}),s.jsx(H,{type:"monotone",dataKey:"Despesa Real",stroke:"#ef4444",strokeWidth:3,dot:{fill:"#ef4444",r:5}})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Saldo Mensal"}),s.jsx(fe,{width:"100%",height:250,children:s.jsxs(ua,{data:n,children:[s.jsx(ye,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(be,{dataKey:"month",stroke:"#6b7280",style:{fontSize:"12px"}}),s.jsx(je,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:l=>`R$ ${(l/1e3).toFixed(0)}k`}),s.jsx(ke,{content:s.jsx(o,{})}),s.jsx(Ne,{}),s.jsx(Ze,{dataKey:"Saldo",fill:"#3b82f6",radius:[8,8,0,0]})]})})]})]})]})},pa=({monthName:e,income:t,expense:r,budgetedIncome:a,budgetedExpense:i,netBalance:n,incomeVariance:o,expenseVariance:l,isFuture:d,onClick:c})=>{const u=d?"bg-gray-50":n>=0?"bg-green-50":"bg-red-50",g=d?"border-gray-200":n>=0?"border-green-200":"border-red-200";return s.jsxs("div",{onClick:c,className:`${u} ${g} border-2 rounded-xl p-4 cursor-pointer transition-all hover:shadow-md active:scale-98 ${d?"opacity-50":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e}),!d&&s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${n>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:n>=0?"âœ“ Positivo":"âš ï¸ Negativo"})]}),s.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Saldo LÃ­quido"}),s.jsx("div",{className:`text-2xl font-bold ${d?"text-gray-400":n>=0?"text-green-600":"text-red-600"}`,children:d?"-":v(n)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Receita"}),s.jsx("div",{className:"text-sm font-semibold text-green-600",children:d?"-":v(t)}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["Meta: ",v(a)]}),!d&&s.jsxs("div",{className:`text-xs font-medium mt-1 ${o>=0?"text-green-600":"text-red-600"}`,children:[o>=0?"â†‘":"â†“"," ",v(Math.abs(o))]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Despesa"}),s.jsx("div",{className:"text-sm font-semibold text-red-600",children:d?"-":v(r)}),s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["Meta: ",v(i)]}),!d&&s.jsxs("div",{className:`text-xs font-medium mt-1 ${l>=0?"text-green-600":"text-red-600"}`,children:[l>=0?"â†“":"â†‘"," ",v(Math.abs(l))]})]})]}),s.jsx("div",{className:"text-xs text-gray-500 text-center mt-2 pt-2 border-t border-gray-200",children:"Tocar para ver detalhes â†’"})]})},ga=({transactions:e,budgets:t,categories:r,year:a,onMonthClick:i})=>{const{yearlySummary:n}=W(e,t,r,a),{isMobile:o}=Kt();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-4",children:["Breakdown Mensal ",a]}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-4",children:[o?"Toque":"Clique"," em qualquer mÃªs para ver detalhes"]})]}),o?s.jsxs("div",{className:"p-4 space-y-3",children:[n.monthlyBreakdowns.map(l=>s.jsx(pa,{monthName:l.monthName,income:l.income,expense:l.expense,budgetedIncome:l.budgetedIncome,budgetedExpense:l.budgetedExpense,netBalance:l.netBalance,incomeVariance:l.incomeVariance,expenseVariance:l.expenseVariance,isFuture:l.isFuture,onClick:()=>i(l.month)},l.month)),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-xl p-4 mt-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:["TOTAL ",a]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Saldo LÃ­quido:"}),s.jsx("span",{className:`text-lg font-bold ${n.netBalance>=0?"text-green-600":"text-red-600"}`,children:v(n.netBalance)})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Receita Total:"}),s.jsx("span",{className:"font-semibold text-green-600",children:v(n.totalIncome)})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Despesa Total:"}),s.jsx("span",{className:"font-semibold text-red-600",children:v(n.totalExpense)})]})]})]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"MÃªs"}),s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:["Receita",s.jsx("br",{}),"Planejada"]}),s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:["Receita",s.jsx("br",{}),"Real"]}),s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:["Despesa",s.jsx("br",{}),"Planejada"]}),s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:["Despesa",s.jsx("br",{}),"Real"]}),s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:["Saldo",s.jsx("br",{}),"LÃ­quido"]}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Var. Receita"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Var. Despesa"})]})}),s.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[n.monthlyBreakdowns.map(l=>s.jsxs("tr",{onClick:()=>i(l.month),className:`hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors ${l.isFuture?"opacity-40":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:l.monthName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500 dark:text-gray-400",children:v(l.budgetedIncome)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600 dark:text-green-400",children:l.isFuture?"-":v(l.income)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500 dark:text-gray-400",children:v(l.budgetedExpense)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-red-600 dark:text-red-400",children:l.isFuture?"-":v(l.expense)}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-semibold ${l.isFuture?"text-gray-400 dark:text-gray-500":l.netBalance>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:l.isFuture?"-":v(l.netBalance)}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${l.isFuture?"text-gray-400 dark:text-gray-500":l.incomeVariance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:l.isFuture?"-":`${l.incomeVariance>=0?"+":""}${v(l.incomeVariance)}`}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${l.isFuture?"text-gray-400 dark:text-gray-500":l.expenseVariance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:l.isFuture?"-":`${l.expenseVariance>=0?"+":""}${v(l.expenseVariance)}`})]},l.month)),s.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 font-bold",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"TOTAL"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-700 dark:text-gray-300",children:v(n.totalBudgetedIncome)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 dark:text-green-400",children:v(n.totalIncome)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-700 dark:text-gray-300",children:v(n.totalBudgetedExpense)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600 dark:text-red-400",children:v(n.totalExpense)}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${n.netBalance>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:v(n.netBalance)}),s.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${n.totalIncomeVariance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[n.totalIncomeVariance>=0?"+":"",v(n.totalIncomeVariance)]}),s.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${n.totalExpenseVariance>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[n.totalExpenseVariance>=0?"+":"",v(n.totalExpenseVariance)]})]})]})]})})]})},ha=({transactions:e,budgets:t,categories:r,year:a})=>{const{yearlyGroupSummaries:i}=W(e,t,r,a),[n,o]=x.useState(null),l=d=>{o(n===d?null:d)};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:["AnÃ¡lise por Categoria ",a]}),s.jsxs("div",{className:"space-y-4",children:[i.map(d=>{const c=n===d.groupId,g=(d.totalBudgeted>0?d.totalActual/d.totalBudgeted*100:0)>105;return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{onClick:()=>l(d.groupId),className:"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.groupName}),s.jsx("button",{className:"text-gray-500 dark:text-gray-400",children:c?"â–¼":"â–¶"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Planejado Anual"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v(d.totalBudgeted)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Gasto Anual"}),s.jsx("p",{className:`text-sm font-medium ${g?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:v(d.totalActual)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Restante"}),s.jsx("p",{className:`text-sm font-medium ${d.totalRemaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:v(d.totalRemaining)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ExecuÃ§Ã£o"}),s.jsxs("p",{className:`text-sm font-medium ${d.averagePercentage>105?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[d.averagePercentage.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all ${d.averagePercentage>105?"bg-red-600 dark:bg-red-500":"bg-green-600 dark:bg-green-500"}`,style:{width:`${Math.min(d.averagePercentage,100)}%`}})})]}),c&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Detalhamento Mensal"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"MÃªs"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400",children:"Planejado"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400",children:"Gasto"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400",children:"VariaÃ§Ã£o"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400",children:"%"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.monthlyData.map(p=>{const j=p.budgeted-p.actual,h=p.budgeted>0?p.actual/p.budgeted*100:0;return s.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-800",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-white",children:le(p.month)}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-gray-600 dark:text-gray-400",children:v(p.budgeted)}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-gray-900 dark:text-white",children:v(p.actual)}),s.jsxs("td",{className:`px-4 py-2 text-sm text-right ${j>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[j>=0?"+":"",v(j)]}),s.jsxs("td",{className:`px-4 py-2 text-sm text-right ${h>105?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[h.toFixed(1),"%"]})]},p.month)})})]})})]})]},d.groupId)}),i.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Nenhuma categoria com orÃ§amento definido para ",a]})]})]})},va=({data:e,year:t,onMonthClick:r})=>{const a=n=>{switch(n){case"excellent":return"bg-green-600 dark:bg-green-500 border-green-700 dark:border-green-600";case"good":return"bg-green-400 dark:bg-green-600 border-green-500 dark:border-green-700";case"warning":return"bg-amber-400 dark:bg-amber-600 border-amber-500 dark:border-amber-700";case"danger":return"bg-red-500 dark:bg-red-600 border-red-600 dark:border-red-700";default:return"bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600"}},i=n=>{switch(n){case"excellent":case"good":case"warning":case"danger":return"text-white";default:return"text-gray-600 dark:text-gray-400"}};return s.jsxs("div",{className:"card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:["Desempenho Mensal ",t]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:e.map(n=>{const o=le(n.month),l=n.value-n.budgeted,d=n.budgeted>0?(n.value-n.budgeted)/Math.abs(n.budgeted)*100:0;return s.jsxs("button",{onClick:()=>r==null?void 0:r(n.month),className:`
                relative p-4 rounded-lg border-2 transition-all duration-200
                ${a(n.status)}
                ${r?"hover:scale-105 hover:shadow-lg cursor-pointer":""}
                ${i(n.status)}
              `,title:`${o}: ${v(l)} de saldo`,children:[s.jsx("div",{className:"text-xs font-semibold mb-2 uppercase tracking-wider opacity-90",children:o.substring(0,3)}),s.jsx("div",{className:"text-lg font-bold mb-1",children:v(n.value)}),s.jsxs("div",{className:"text-xs font-medium opacity-90",children:[n.status==="excellent"&&"ðŸŒŸ Excelente",n.status==="good"&&"âœ“ Bom",n.status==="warning"&&"âš  AtenÃ§Ã£o",n.status==="danger"&&"âš  CrÃ­tico",n.status==="neutral"&&"- Sem dados"]}),n.budgeted>0&&s.jsxs("div",{className:"text-xs mt-1 opacity-75",children:[d>=0?"+":"",d.toFixed(0),"%"]})]},n.month)})}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Legenda"}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-600 border-2 border-green-700"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Excelente (Acima da meta)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-400 border-2 border-green-500"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Bom (No orÃ§amento)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-amber-400 border-2 border-amber-500"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"AtenÃ§Ã£o (PrÃ³ximo ao limite)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-red-500 border-2 border-red-600"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"CrÃ­tico (Acima do orÃ§amento)"})]})]})]})]})},ka=({transactions:e,budgets:t,categories:r,year:a,onMonthClick:i})=>{const{yearlySummary:n}=W(e,t,r,a),o=x.useMemo(()=>n.monthlyBreakdowns.filter(l=>!l.isFuture).map(l=>{const d=l.budgetedIncome-l.budgetedExpense,c=l.netBalance;let u="neutral";if(d>0){const g=c/d*100;g>=110?u="excellent":g>=90?u="good":g>=70?u="warning":u="danger"}else c>=0?u="good":u="danger";return{month:l.month,value:c,budgeted:d,status:u}}),[n.monthlyBreakdowns]);return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Lt,{transactions:e,budgets:t,categories:r,year:a}),s.jsx(va,{data:o,year:a,onMonthClick:i}),s.jsx(ma,{transactions:e,budgets:t,categories:r,year:a}),s.jsx(ga,{transactions:e,budgets:t,categories:r,year:a,onMonthClick:i}),s.jsx(ha,{transactions:e,budgets:t,categories:r,year:a})]})};export{ka as YearTab};
