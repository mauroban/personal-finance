import{j as e,r as p,n as y}from"./index-DjoC8Tjb.js";import{f as c,a as j}from"./format-zwvYc4J-.js";import{u as k}from"./useBudgetCalculations-CF5Bm1af.js";const b=({title:i,budgeted:t,actual:r,type:s,icon:l,onClick:a})=>{const n=t>0?r/t*100:0,x=s==="expense"&&n>105,m=s==="income"&&n<95,o=s==="income"&&n>105,d=x||m,g=()=>s==="balance"?"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800":d?"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-red-200 dark:border-red-800":s==="income"?"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",f=()=>s==="balance"?r>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":s==="income"?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white",u=()=>d?"bg-gradient-to-r from-red-500 to-rose-600":s==="income"?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-gradient-to-r from-blue-500 to-indigo-600",h=()=>s==="balance"?r>=0?"âœ“":"âš ":o?"ðŸŽ‰":d?"âš ":"âœ“",N=()=>s==="balance"?r>=0?"Positivo":"Negativo":o?"Acima do esperado":m?"Abaixo do esperado":x?"Acima do orÃ§amento":"No orÃ§amento";return e.jsxs("div",{className:`card p-6 border ${g()} transition-all duration-300 hover:shadow-lg ${a?"cursor-pointer hover:-translate-y-1":""}`,onClick:a,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:i}),l&&e.jsx("span",{className:"text-3xl opacity-80",children:l})]}),e.jsxs("div",{className:"space-y-3",children:[s!=="balance"&&e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Previsto"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:c(t)})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:s==="balance"?"Saldo":"Realizado"}),e.jsx("span",{className:`text-3xl font-bold ${f()} transition-colors`,children:c(r)})]}),s!=="balance"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("span",{className:`text-sm ${o?"text-green-600 dark:text-green-400":d?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:h()}),e.jsx("span",{className:`text-xs font-medium ${o?"text-green-600 dark:text-green-400":d?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:N()}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto",children:j(n)})]}),e.jsxs("div",{className:"pt-1",children:[e.jsx("div",{className:"relative w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${u()}`,style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s==="income"?"Recebido":"Gasto"}),e.jsx("span",{className:`text-xs font-semibold ${s==="income"?r>=t?"text-green-600 dark:text-green-400":"text-lime-600 dark:text-lime-400":r<=t?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s==="income"?r>=t?`+${c(Math.abs(r-t))} a mais`:`${c(Math.abs(t-r))} falta receber`:r<=t?`${c(Math.abs(t-r))} restante`:`+${c(Math.abs(r-t))} acima`})]})]})]}),s==="balance"&&t>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Meta de economia"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:c(t)})]}),t>0&&e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r>=t?"Acima da meta":"Falta economizar"}),e.jsx("span",{className:`text-xs font-semibold ${r>=t?"text-green-600 dark:text-green-400":"text-lime-600 dark:text-lime-400"}`,children:c(Math.abs(r-t))})]})]})]})]})},v=({category:i,isExpandable:t=!1,subcategories:r=[],icon:s})=>{const[l,a]=p.useState(!1),n=o=>o>105?{label:"Acima do orÃ§amento",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-500",icon:"âš "}:o>=85?{label:"AtenÃ§Ã£o",color:"text-lime-600 dark:text-lime-400",bgColor:"bg-lime-500",icon:"âš¡"}:{label:"Dentro do orÃ§amento",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-500",icon:"âœ“"},x=n(i.percentage),m=t&&r.length>0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all ${m?"cursor-pointer":""}`,onClick:()=>m&&a(!l),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx("span",{className:"text-xl",children:s}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:i.groupName}),m&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.length,")"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("span",{className:x.color,children:x.icon}),e.jsx("span",{children:x.label})]})]})]}),m&&e.jsx("div",{className:"ml-auto mr-4",children:e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:c(i.actual)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["de ",c(i.budgeted)]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"relative w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${x.bgColor}`,style:{width:`${Math.min(i.percentage,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:`font-medium ${x.color}`,children:j(i.percentage)}),e.jsxs("span",{className:`font-medium ${i.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.remaining>=0?"":"-",c(Math.abs(i.remaining))," restante"]})]})]})]}),l&&r.length>0&&e.jsx("div",{className:"ml-8 space-y-2 animate-fadeIn",children:r.map(o=>{const d=n(o.percentage);return e.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"â””"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:o.subgroupName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:d.color,children:d.icon})," ",d.label]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:c(o.actual)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["/ ",c(o.budgeted)]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"relative w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:`h-full rounded-full transition-all ${d.bgColor}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:`${d.color}`,children:j(o.percentage)}),e.jsx("span",{className:o.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:c(Math.abs(o.remaining))})]})]})]},o.subgroupId)})})]})},w={Moradia:"ðŸ ",AlimentaÃ§Ã£o:"ðŸ”",Transporte:"ðŸš—",SaÃºde:"ðŸ¥",EducaÃ§Ã£o:"ðŸ“š",Lazer:"ðŸŽ®",VestuÃ¡rio:"ðŸ‘”",ServiÃ§os:"ðŸ”§",Outros:"ðŸ’¼"},$=({summaries:i,summariesWithSubcategories:t,showSubcategories:r=!1})=>{const s=r&&t?t:i;return e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Despesas por Categoria"}),e.jsxs("div",{className:"space-y-4",children:[s.map(l=>{const a="subcategories"in l?l.subcategories:void 0,n=a&&a.length>0;return e.jsx(v,{category:l,isExpandable:r&&!!n,subcategories:a,icon:w[l.groupName]},l.groupId)}),s.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma categoria com orÃ§amento definido para este mÃªs"})})]})]})},S=({transactions:i,title:t="Top TransaÃ§Ãµes",emptyMessage:r="Nenhuma transaÃ§Ã£o encontrada"})=>{const s=a=>new Date(a+"T12:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),l=a=>a.subcategoryName?`${a.categoryName} â€º ${a.subcategoryName}`:a.categoryName||a.sourceName||"Sem categoria";return i.length===0?e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:r})]}):e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4",children:t}),e.jsx("div",{className:"space-y-3",children:i.map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 flex items-center justify-center text-xs font-semibold",children:n+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:a.note||"Sem descriÃ§Ã£o"})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"truncate",children:l(a)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"flex-shrink-0",children:s(a.date)})]})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-3",children:e.jsx("p",{className:`text-sm font-semibold ${a.type==="earning"?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:c(a.value)})})]},a.id||n))}),i.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Total (",i.length," transaÃ§Ãµes)"]}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c(i.reduce((a,n)=>a+n.value,0))})]})})]})},M=(i,t,r,s,l,a,n=5)=>p.useMemo(()=>[...i.filter(d=>y(d.date,s,l)&&d.type===a)].sort((d,g)=>g.value-d.value).slice(0,n).map(d=>{const g=t.find(h=>h.id===d.groupId),f=t.find(h=>h.id===d.subgroupId),u=r.find(h=>h.id===d.sourceId);return{...d,categoryName:g==null?void 0:g.name,subcategoryName:f==null?void 0:f.name,sourceName:u==null?void 0:u.name}}),[i,t,r,s,l,a,n]),E=({transactions:i,budgets:t,categories:r,sources:s,selectedYear:l,selectedMonth:a})=>{const{monthSummary:n,groupSummariesWithSubcategories:x}=k(i,t,r,l,a),m=M(i,r,s,l,a,"expense",5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(b,{title:"Receitas",budgeted:n.budgetedIncome,actual:n.totalIncome,type:"income",icon:"ðŸ’°"}),e.jsx(b,{title:"Despesas",budgeted:n.budgetedExpense,actual:n.totalExpense,type:"expense",icon:"ðŸ’¸"}),e.jsx(b,{title:"Saldo Mensal",budgeted:n.budgetedIncome-n.budgetedExpense,actual:n.netBalance,type:"balance",icon:"ðŸ“Š"})]}),e.jsx($,{summaries:x,summariesWithSubcategories:x,showSubcategories:!0}),e.jsx(S,{transactions:m,title:"Maiores Despesas do MÃªs",emptyMessage:"Nenhuma despesa registrada neste mÃªs"})]})};export{E as MonthTab};
