import{u as ee,r as l,a as _,j as e,B as O,p as h,b as oe,f as de,R as ie}from"./index-DjoC8Tjb.js";import{P as ce}from"./PageContainer-Dpv9AWI-.js";import{M as ge,I as Y,S as Q,T as xe,C as ue}from"./ConfirmModal-D_6NAvxK.js";import{f as R}from"./format-zwvYc4J-.js";import"./useMediaQuery-BhwLU3FH.js";const ae=({isOpen:y,onClose:x,transaction:o})=>{const{categories:$,sources:C,addTransaction:A,updateTransaction:u}=ee(),[n,i]=l.useState("expense"),[I,c]=l.useState("unique"),[q,b]=l.useState(""),[L,v]=l.useState(_()),[S,M]=l.useState(""),[N,T]=l.useState(""),[f,p]=l.useState(""),[m,w]=l.useState("CartÃ£o de CrÃ©dito"),[H,P]=l.useState("1"),[D,z]=l.useState(""),G=$.filter(r=>!r.parentId),X=N?$.find(r=>r.id===parseInt(N)):null,V=X?$.filter(r=>r.parentId===X.id):[];l.useEffect(()=>{var r,j,d;o?(i(o.type),b(o.value.toString()),v(o.date),M(((r=o.sourceId)==null?void 0:r.toString())||""),T(((j=o.groupId)==null?void 0:j.toString())||""),p(((d=o.subgroupId)==null?void 0:d.toString())||""),w(o.paymentMethod||"CartÃ£o de CrÃ©dito"),z(o.note||""),c("unique"),P("1")):F()},[o]);const F=()=>{b(""),v(_()),M(""),T(""),p(""),w("CartÃ£o de CrÃ©dito"),c("unique"),P("1"),z("")},B=async r=>{r.preventDefault();const j=parseFloat(q),d=parseInt(H);if(!j||j<=0){alert("Por favor, insira um valor vÃ¡lido");return}if(n==="earning"&&!S){alert("Por favor, selecione uma fonte de renda");return}if(n==="expense"&&!N){alert("Por favor, selecione uma categoria");return}if(I==="installment"&&d<2){alert("Para parcelas, informe pelo menos 2 repetiÃ§Ãµes");return}if(o!=null&&o.id)await u(o.id,{type:n,value:j,date:L,sourceId:n==="earning"?parseInt(S):void 0,groupId:n==="expense"?parseInt(N):void 0,subgroupId:n==="expense"&&f?parseInt(f):void 0,paymentMethod:n==="expense"?m:void 0,note:D||void 0});else if(I==="installment"){const J=j/d,E=h(L);for(let k=0;k<d;k++){const K=oe(E,k);await A({type:n,value:J,date:de(K),sourceId:n==="earning"?parseInt(S):void 0,groupId:n==="expense"?parseInt(N):void 0,subgroupId:n==="expense"&&f?parseInt(f):void 0,paymentMethod:n==="expense"?m:void 0,installments:d,installmentNumber:k+1,note:D||void 0})}}else await A({type:n,value:j,date:L,sourceId:n==="earning"?parseInt(S):void 0,groupId:n==="expense"?parseInt(N):void 0,subgroupId:n==="expense"&&f?parseInt(f):void 0,paymentMethod:n==="expense"?m:void 0,note:D||void 0});F(),x()};return e.jsx(ge,{isOpen:y,onClose:x,title:o?"Editar TransaÃ§Ã£o":"Nova TransaÃ§Ã£o",size:"lg",children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{type:"button",variant:n==="expense"?"danger":"secondary",className:"flex-1",onClick:()=>i("expense"),children:"Despesa"}),e.jsx(O,{type:"button",variant:n==="earning"?"success":"secondary",className:"flex-1",onClick:()=>i("earning"),children:"Receita"})]}),!o&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de TransaÃ§Ã£o"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(O,{type:"button",variant:I==="unique"?"primary":"secondary",size:"sm",onClick:()=>c("unique"),children:"Ãšnico"}),e.jsx(O,{type:"button",variant:I==="installment"?"primary":"secondary",size:"sm",onClick:()=>c("installment"),children:"Parcelado"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Y,{label:"Valor (R$)",type:"number",step:"0.01",min:"0",value:q,onChange:r=>b(r.target.value),required:!0,placeholder:"0.00"}),e.jsx(Y,{label:"Data",type:"date",value:L,onChange:r=>v(r.target.value),required:!0})]}),I==="installment"&&e.jsx(Y,{label:"NÃºmero de Parcelas",type:"number",min:"2",value:H,onChange:r=>P(r.target.value),required:!0,placeholder:"Ex: 12"}),n==="earning"?e.jsxs(Q,{label:"Fonte de Renda",value:S,onChange:r=>M(r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma fonte"}),C.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{label:"Categoria",value:N,onChange:r=>{T(r.target.value),p("")},required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),G.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),V.length>0&&e.jsxs(Q,{label:"Subcategoria (Opcional)",value:f,onChange:r=>p(r.target.value),children:[e.jsx("option",{value:"",children:"Nenhuma"}),V.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs(Q,{label:"Forma de Pagamento",value:m,onChange:r=>w(r.target.value),children:[e.jsx("option",{value:"CartÃ£o de CrÃ©dito",children:"CartÃ£o de CrÃ©dito"}),e.jsx("option",{value:"CartÃ£o de DÃ©bito",children:"CartÃ£o de DÃ©bito"}),e.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"PIX",children:"PIX"}),e.jsx("option",{value:"TransferÃªncia",children:"TransferÃªncia"}),e.jsx("option",{value:"Boleto",children:"Boleto"})]})]}),e.jsx(xe,{label:"Nota (Opcional)",value:D,onChange:r=>z(r.target.value),rows:2,placeholder:"Adicione uma nota sobre esta transaÃ§Ã£o..."}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(O,{type:"button",variant:"secondary",onClick:x,children:"Cancelar"}),e.jsx(O,{type:"submit",children:o?"Salvar":"Adicionar"})]})]})})},pe=()=>{const{transactions:y,categories:x,sources:o,deleteTransaction:$}=ee(),[C,A]=l.useState("all"),[u,n]=l.useState(""),[i,I]=l.useState(""),[c,q]=l.useState("all"),[b,L]=l.useState("all"),[v,S]=l.useState(""),[M,N]=l.useState("date"),[T,f]=l.useState("desc"),[p,m]=l.useState(1),[w,H]=l.useState(20),[P,D]=l.useState({isOpen:!1,id:null}),[z,G]=l.useState(void 0),[X,V]=l.useState(!1),F=l.useCallback((a,s)=>{if(s){const t=x.find(g=>g.id===s);return(t==null?void 0:t.name)||""}if(a){const t=x.find(g=>g.id===a);return(t==null?void 0:t.name)||""}return""},[x]),B=l.useCallback(a=>{const s=o.find(t=>t.id===a);return(s==null?void 0:s.name)||""},[o]),r=l.useMemo(()=>{const a=new Set(y.map(s=>s.paymentMethod).filter(Boolean));return Array.from(a).sort()},[y]),j=l.useMemo(()=>{const a=x.filter(t=>!t.parentId).map(t=>({value:`category-${t.id}`,label:t.name||"",type:"expense"})),s=o.map(t=>({value:`source-${t.id}`,label:t.name||"",type:"earning"}));return[...a,...s]},[x,o]),d=l.useMemo(()=>{let a=[...y];if(C!=="all"&&(a=a.filter(s=>s.type===C)),u){const s=new Date(u);a=a.filter(t=>h(t.date)>=s)}if(i){const s=new Date(i);s.setHours(23,59,59,999),a=a.filter(t=>h(t.date)<=s)}if(c!=="all"){if(c.startsWith("category-")){const s=parseInt(c.replace("category-",""));a=a.filter(t=>t.type==="expense"&&t.groupId===s)}else if(c.startsWith("source-")){const s=parseInt(c.replace("source-",""));a=a.filter(t=>t.type==="earning"&&t.sourceId===s)}}if(b!=="all"&&(a=a.filter(s=>s.paymentMethod===b)),v.trim()){const s=v.toLowerCase();a=a.filter(t=>{var g;return(g=t.note)==null?void 0:g.toLowerCase().includes(s)})}return a.sort((s,t)=>{let g=0;switch(M){case"date":g=h(s.date).getTime()-h(t.date).getTime();break;case"type":g=s.type.localeCompare(t.type);break;case"category":const le=s.type==="earning"?B(s.sourceId):F(s.groupId,s.subgroupId),ne=t.type==="earning"?B(t.sourceId):F(t.groupId,t.subgroupId);g=le.localeCompare(ne);break;case"amount":g=s.value-t.value;break;case"paymentMethod":g=(s.paymentMethod||"").localeCompare(t.paymentMethod||"");break}return T==="asc"?g:-g}),a},[y,C,u,i,c,b,v,M,T,F,B]),J=l.useMemo(()=>{const a=(p-1)*w;return d.slice(a,a+w)},[d,p,w]),E=Math.ceil(d.length/w);ie.useEffect(()=>{m(1)},[C,u,i,c,b,v]);const k=a=>{M===a?f(T==="asc"?"desc":"asc"):(N(a),f("desc"))},K=a=>{D({isOpen:!0,id:a})},re=async()=>{P.id&&(await $(P.id),D({isOpen:!1,id:null}))},Z=a=>{G(a),V(!0)},te=()=>{V(!1),G(void 0)},se=()=>{A("all"),n(""),I(""),q("all"),L("all"),S(""),m(1)},U=C!=="all"||u||i||c!=="all"||b!=="all"||v,W=({field:a})=>M!==a?e.jsx("span",{className:"text-gray-400 ml-1",children:"â‡…"}):T==="asc"?e.jsx("span",{className:"ml-1",children:"â†‘"}):e.jsx("span",{className:"ml-1",children:"â†“"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 dark:bg-blue-500 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Filtros"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:U?"Filtros ativos aplicados":"Nenhum filtro aplicado"})]})]}),U&&e.jsx("button",{onClick:se,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors shadow-sm border border-gray-300 dark:border-gray-600 flex-shrink-0 w-full sm:w-auto",children:"Limpar Tudo"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Tipo"}),e.jsxs("select",{value:C,onChange:a=>A(a.target.value),className:"w-full px-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-medium",children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"earning",children:"ðŸ’µ Receitas"}),e.jsx("option",{value:"expense",children:"ðŸ’³ Despesas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Data Inicial"}),e.jsx("input",{type:"date",value:u,onChange:a=>n(a.target.value),onFocus:a=>!u&&(a.target.style.color=""),onBlur:a=>!u&&(a.target.style.color="transparent"),className:`w-full px-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 ${u?"bg-white dark:bg-gray-800":"bg-transparent"} text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-medium`,style:u?void 0:{color:"transparent"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Data Final"}),e.jsx("input",{type:"date",value:i,onChange:a=>I(a.target.value),onFocus:a=>!i&&(a.target.style.color=""),onBlur:a=>!i&&(a.target.style.color="transparent"),className:`w-full px-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 ${i?"bg-white dark:bg-gray-800":"bg-transparent"} text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-medium`,style:i?void 0:{color:"transparent"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Categoria/Fonte"}),e.jsxs("select",{value:c,onChange:a=>q(a.target.value),className:"w-full px-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-medium",children:[e.jsx("option",{value:"all",children:"Todas as categorias"}),j.map(a=>e.jsxs("option",{value:a.value,children:[a.label," (",a.type==="earning"?"Receita":"Despesa",")"]},a.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Pagamento"}),e.jsxs("select",{value:b,onChange:a=>L(a.target.value),className:"w-full px-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-medium",children:[e.jsx("option",{value:"all",children:"Todos os mÃ©todos"}),r.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Buscar Notas"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:v,onChange:a=>S(a.target.value),placeholder:"Digite para buscar...",className:"w-full pl-10 pr-3 py-2.5 border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all placeholder:text-gray-400 dark:placeholder:text-gray-500 font-medium"}),e.jsx("svg",{className:"absolute left-3 top-3 w-5 h-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsx("div",{className:"mt-5 pt-5 border-t border-blue-200 dark:border-blue-800/50",children:e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:d.length}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 ml-1",children:"visÃ­veis"})]}),d.length!==y.length&&e.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:y.length}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:"total"})]})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>k("date"),children:e.jsxs("div",{className:"flex items-center",children:["Data",e.jsx(W,{field:"date"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>k("type"),children:e.jsxs("div",{className:"flex items-center",children:["Tipo",e.jsx(W,{field:"type"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>k("category"),children:e.jsxs("div",{className:"flex items-center",children:["Categoria/Fonte",e.jsx(W,{field:"category"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>k("paymentMethod"),children:e.jsxs("div",{className:"flex items-center",children:["Pagamento",e.jsx(W,{field:"paymentMethod"})]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>k("amount"),children:e.jsxs("div",{className:"flex items-center justify-end",children:["Valor",e.jsx(W,{field:"amount"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Nota"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:J.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:h(a.date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.type==="earning"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:a.type==="earning"?"Receita":"Despesa"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:a.type==="earning"?B(a.sourceId):F(a.groupId,a.subgroupId)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:[a.paymentMethod||"-",a.installments&&a.installments>1&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500 dark:text-gray-500",children:["(",a.installmentNumber,"/",a.installments,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsx("span",{className:a.type==="earning"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:R(a.value)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:a.note?e.jsx("span",{className:"truncate max-w-xs inline-block",title:a.note,children:a.note}):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>Z(a),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors","aria-label":`Editar transaÃ§Ã£o de ${R(a.value)} do dia ${h(a.date).toLocaleDateString("pt-BR")}`,title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>K(a.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors","aria-label":`Excluir transaÃ§Ã£o de ${R(a.value)} do dia ${h(a.date).toLocaleDateString("pt-BR")}`,title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-200 dark:divide-gray-700",children:J.map(a=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.type==="earning"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:a.type==="earning"?"Receita":"Despesa"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:h(a.date).toLocaleDateString("pt-BR")})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.type==="earning"?B(a.sourceId):F(a.groupId,a.subgroupId)})]}),e.jsx("div",{className:`text-lg font-semibold ${a.type==="earning"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:R(a.value)})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[a.paymentMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pagamento:"})," ",a.paymentMethod,a.installments&&a.installments>1&&e.jsxs("span",{className:"ml-1 text-xs",children:["(",a.installmentNumber,"/",a.installments,")"]})]}),a.note&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nota:"})," ",a.note]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>Z(a),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors","aria-label":`Editar transaÃ§Ã£o de ${R(a.value)} do dia ${h(a.date).toLocaleDateString("pt-BR")}`,title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>K(a.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors","aria-label":`Excluir transaÃ§Ã£o de ${R(a.value)} do dia ${h(a.date).toLocaleDateString("pt-BR")}`,title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},a.id))}),d.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:U?"Nenhuma transaÃ§Ã£o encontrada com os filtros aplicados.":"Nenhuma transaÃ§Ã£o registrada. Adicione sua primeira transaÃ§Ã£o!"})}),d.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Itens por pÃ¡gina:"}),e.jsxs("select",{value:w,onChange:a=>{H(Number(a.target.value)),m(1)},className:"px-3 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(1),disabled:p===1,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Â«Â«"}),e.jsx("button",{onClick:()=>m(a=>Math.max(1,a-1)),disabled:p===1,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Â«"}),e.jsxs("span",{className:"px-4 py-1 text-sm text-gray-700 dark:text-gray-300",children:["PÃ¡gina ",p," de ",E]}),e.jsx("button",{onClick:()=>m(a=>Math.min(E,a+1)),disabled:p===E,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Â»"}),e.jsx("button",{onClick:()=>m(E),disabled:p===E,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Â»Â»"})]})]})]}),e.jsx(ue,{isOpen:P.isOpen,onClose:()=>D({isOpen:!1,id:null}),onConfirm:re,title:"Excluir TransaÃ§Ã£o",message:"Tem certeza que deseja excluir esta transaÃ§Ã£o? Esta aÃ§Ã£o nÃ£o pode ser desfeita.",confirmText:"Excluir",cancelText:"Cancelar",variant:"danger"}),e.jsx(ae,{isOpen:X,onClose:te,transaction:z})]})},fe=()=>{const[y,x]=l.useState(!1);return e.jsxs(ce,{title:"TransaÃ§Ãµes",description:"Registre suas receitas e despesas",action:e.jsx(O,{onClick:()=>x(!0),children:"+ Nova TransaÃ§Ã£o"}),children:[e.jsx(ae,{isOpen:y,onClose:()=>x(!1)}),e.jsx(pe,{})]})};export{fe as TransactionsPage};
